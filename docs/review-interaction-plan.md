# レビュータブ インタラクション改善計画

## 目的
- 一言コメントタブで「参考になった」ボタンを押せるようにし、Supabase に票を記録する。
- YouTube タブの「新着順 / 高評価順」および一言コメントタブの「新着順 / 評価順 / 参考になった順」を実際に切り替えてソートできるようにする。

## やること一覧
1. **Supabase Helpful 投票**
   - `oneliner_review_votes` テーブルに投票する REST 呼び出しを整理。
   - `HelpfulVoteButton` から押下リクエストを送信し、成功時にローカル状態と Supabase の値を更新する。
   - 一度押したら再度押せないように（localStorage + DB 一意制約）。

2. **ソート切り替え**
   - YouTube タブ: `publishedAt` で新着順、`likeCount` で高評価順。
   - 一言コメントタブ: `postedAt` / `rating` / `helpful` を使ってソート。
   - UI 上のタブをクリックすると状態を切り替え、ローカルデータを並び替える。

3. **切り替え状態の保持**
   - タブ切り替え内で現在のソート状態を `useState` で管理。
   - 必要に応じて URL クエリや localStorage で保持する仕組みも検討。

4. **フィードバック & ログ**
   - Helpful 投票が失敗した場合はトーストやエラーメッセージを表示。
   - ソート切り替え中にデータが無い場合でも表示が崩れないようにハンドリング。

## TODO
- [ ] Helpful 投票 API 呼び出しの整理とリファクタリング
- [ ] 投票ボタンの活性制御（押下済み判定）
- [ ] YouTube タブのソート切り替え実装
- [ ] 一言コメントタブのソート切り替え実装
- [ ] エラーハンドリングと UI フィードバック
